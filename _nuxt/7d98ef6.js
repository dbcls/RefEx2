(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{477:function(t,e,n){var content=n(513);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(34).default)("62b35408",content,!0,{sourceMap:!1})},509:function(t){t.exports=JSON.parse('[{"name":"TPM","type":"TPM","id":"filter_TPM","list":[{"sample":{"input":"","id":"","description":"","isSelected":false},"cutoff":"","condition":"","statistic":""}],"defaultItem":{"sample":{"input":"","id":"","description":"","isSelected":false},"cutoff":"","condition":"","statistic":""},"columns":[{"name":"Sample","id":"sample","isRequired":true,"placeholder":"search by keywords","inputType":"text"},{"name":"Cutoff","id":"cutoff","isRequired":true,"placeholder":"0.1","inputType":"number","min":"0","max":"1"},{"name":"Condition","id":"condition","isRequired":true,"placeholder":"<","inputType":"dropdown","options":[{"description":"<","value":"gt"},{"description":"=","value":"eq"},{"description":">","value":"lt"}]},{"name":"Statistic","id":"statistic","isRequired":true,"placeholder":"max(TPM)","inputType":"dropdown","options":[{"description":"max(TPM)","value":"max(TPM)"},{"description":"min(TPM)","value":"min(TPM)"}]}]},{"name":"Tissue specificity (ROKU)","type":"ROKU","id":"filter_specificity_ROKU","list":[{"group":"","sample":{"input":"","id":"","description":"","isSelected":false},"horl":"","emin":"","emax":""}],"defaultItem":{"group":"","sample":{"input":"","id":"","description":"","isSelected":false},"horl":"","emin":"","emax":""},"columns":[{"name":"Group","id":"group","isRequired":true,"placeholder":"All groups","inputType":"dropdown"},{"name":"Sample","id":"sample","isRequired":true,"placeholder":"select a group and search by keywords","inputType":"text"},{"name":"High or Low","id":"horl","isRequired":true,"placeholder":"High","inputType":"dropdown","options":[{"description":"High","value":"high"},{"description":"Low","value":"low"}]},{"name":"Entropy-min (Optional)","id":"emin","isRequired":false,"placeholder":"1","inputType":"number","min":"1","max":"5"},{"name":"Entropy-max (Optional)","id":"emax","isRequired":false,"placeholder":"5","inputType":"number","min":"1","max":"5"}]},{"name":"Tissue specificity (tau)","type":"tau","id":"filter_specificity_tau","list":[{"group":"","cutoff":"","condition":""}],"defaultItem":{"group":"","cutoff":"","condition":""},"columns":[{"name":"Group","id":"group","isRequired":true,"placeholder":"select a group","inputType":"dropdown"},{"name":"Cutoff (0-1)","id":"cutoff","isRequired":true,"placeholder":"0.1","inputType":"number","min":"0","max":"1"},{"name":"Condition","id":"condition","isRequired":true,"placeholder":"<","inputType":"dropdown","options":[{"description":"<","value":"gt"},{"description":"=","value":"eq"},{"description":">","value":"lt"}]}]}]')},512:function(t,e,n){"use strict";n(477)},513:function(t,e,n){var r=n(33)(!1);r.push([t.i,"[data-v-2dcf79d5] .filter_search_condition{padding-bottom:15px}[data-v-2dcf79d5] .multiselect input{width:auto}[data-v-2dcf79d5] .multiselect input[type=text]{border:none;background:#f5f7f9;width:100%;padding:10px 20px;box-sizing:border-box;border-radius:.2rem;position:relative}[data-v-2dcf79d5] .multiselect input[type=text]::-moz-placeholder{color:#ccc}[data-v-2dcf79d5] .multiselect input[type=text]::placeholder{color:#ccc}[data-v-2dcf79d5] .multiselect input[type=text]:focus{outline:none}[data-v-2dcf79d5] .multiselect .multiselect__tag{background:#488ec4}[data-v-2dcf79d5] .multiselect .multiselect__tag>.multiselect__tag-icon{background:none}[data-v-2dcf79d5] .multiselect .multiselect__tag>.multiselect__tag-icon:after{color:#fff}[data-v-2dcf79d5] .multiselect .multiselect__tags{border:none;background:#f5f7f9}[data-v-2dcf79d5] .multiselect .multiselect__option{background:none}[data-v-2dcf79d5] .multiselect .multiselect__option>.option{display:flex;align-items:center;grid-gap:10px;gap:10px}[data-v-2dcf79d5] .multiselect .multiselect__option>.option>input[type=checkbox]{cursor:pointer}[data-v-2dcf79d5] .multiselect .multiselect__element{display:block}[data-v-2dcf79d5] .multiselect .multiselect__option--highlight{background:#488ec4}[data-v-2dcf79d5] .multiselect [class^=multiselect__option]:after{content:none}[data-v-2dcf79d5] .filter{margin-left:20px}[data-v-2dcf79d5] .filter+.filter{margin-top:30px}[data-v-2dcf79d5] .filter_specificity_ROKU table thead,[data-v-2dcf79d5] .filter_specificity_tau table thead,[data-v-2dcf79d5] .filter_TPM table thead{height:30px}[data-v-2dcf79d5] .filter_specificity_ROKU table thead th,[data-v-2dcf79d5] .filter_specificity_tau table thead th,[data-v-2dcf79d5] .filter_TPM table thead th{font-size:12px;font-weight:400;text-align:left;text-align:initial}[data-v-2dcf79d5] .filter_specificity_ROKU table tbody input,[data-v-2dcf79d5] .filter_specificity_ROKU table tbody select,[data-v-2dcf79d5] .filter_specificity_tau table tbody input,[data-v-2dcf79d5] .filter_specificity_tau table tbody select,[data-v-2dcf79d5] .filter_TPM table tbody input,[data-v-2dcf79d5] .filter_TPM table tbody select{height:2.25em}[data-v-2dcf79d5] .filter_specificity_ROKU table tbody .text_search_name input,[data-v-2dcf79d5] .filter_specificity_tau table tbody .text_search_name input,[data-v-2dcf79d5] .filter_TPM table tbody .text_search_name input{font-size:20px}[data-v-2dcf79d5] .filter_TPM table th .icon,[data-v-2dcf79d5] .filter_TPM table tr .icon{text-align:center}[data-v-2dcf79d5] .filter_TPM table th .sample,[data-v-2dcf79d5] .filter_TPM table tr .sample{width:70%}[data-v-2dcf79d5] .filter_TPM table th .condition,[data-v-2dcf79d5] .filter_TPM table th .cutoff,[data-v-2dcf79d5] .filter_TPM table tr .condition,[data-v-2dcf79d5] .filter_TPM table tr .cutoff{width:10%}[data-v-2dcf79d5] .filter_TPM table th .statistic,[data-v-2dcf79d5] .filter_TPM table tr .statistic{width:20%}[data-v-2dcf79d5] .filter_specificity_ROKU table th .icon,[data-v-2dcf79d5] .filter_specificity_ROKU table tr .icon{text-align:center}[data-v-2dcf79d5] .filter_specificity_ROKU table th .group,[data-v-2dcf79d5] .filter_specificity_ROKU table tr .group{width:25%}[data-v-2dcf79d5] .filter_specificity_ROKU table th .sample,[data-v-2dcf79d5] .filter_specificity_ROKU table tr .sample{width:40%}[data-v-2dcf79d5] .filter_specificity_ROKU table th .horl,[data-v-2dcf79d5] .filter_specificity_ROKU table tr .horl{width:15%}[data-v-2dcf79d5] .filter_specificity_ROKU table th .emax,[data-v-2dcf79d5] .filter_specificity_ROKU table th .emin,[data-v-2dcf79d5] .filter_specificity_ROKU table tr .emax,[data-v-2dcf79d5] .filter_specificity_ROKU table tr .emin{width:10%}[data-v-2dcf79d5] .filter_specificity_tau table th .icon,[data-v-2dcf79d5] .filter_specificity_tau table tr .icon{text-align:center}[data-v-2dcf79d5] .filter_specificity_tau table th .group,[data-v-2dcf79d5] .filter_specificity_tau table tr .group{width:70%}[data-v-2dcf79d5] .filter_specificity_tau table th .condition,[data-v-2dcf79d5] .filter_specificity_tau table th .cutoff,[data-v-2dcf79d5] .filter_specificity_tau table tr .condition,[data-v-2dcf79d5] .filter_specificity_tau table tr .cutoff{width:15%}",""]),t.exports=r},522:function(t,e,n){"use strict";n.r(e);n(74),n(76),n(36),n(30),n(42),n(59),n(35),n(60);var r=n(17),o=n(14),c=n(23),l=(n(79),n(123),n(51),n(15),n(44),n(28),n(77),n(241),n(444),n(341),n(75),n(125),n(230),n(390)),d=n.n(l),f=n(447),h=n.n(f),m=n(73),v=n(100),_=n(509),y=n(489);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P=JSON.stringify(_),x=JSON.stringify(v),w=function(){return{chrValue:[],TOGValue:[],temporaryParameters:{goTerm:""},parameters:{go:[],chromosomePosition:"",typeOfGene:"",filter:""},hideCaret:!1,geneFilters:JSON.parse(P),datasets:JSON.parse(x),activeFilterObj:{}}},C={components:{MultiSelect:h.a,ScreenerViewGeneFilter:y.default},data:function(){return T({filterValue:[],TPMValue:[],ROKUValue:[],tauValue:[],autocompleteStaticData:{},chrCheckedValue:[],chrOptions:[],TOGOptions:[],autoComplete:{go:[],chromosomePosition:[],typeOfGene:[],filter:[]},debounce:null},w())},computed:T(T({},Object(m.b)({activeDataset:"active_dataset",activeFilter:"active_filter",searchConditions:"get_search_conditions"})),{},{goTermString:function(){return 0===this.parameters.go.length?"":this.parameters.go.map((function(t){return t.id})).join(", ")},placeholderGOTerm:function(){return!Boolean(this.temporaryParameters.goTerm)&&this.parameters.go.length<1?"transcription factor binding":"Only one tag is allowed"},isInitialState:function(){var t=this,e=w();return Object.keys(e).every((function(n){return d.a.isEqual(t.$data[n],e[n])}))}}),watch:{activeDataset:function(){this.$emit("resetAll")},isInitialState:function(t){this.$emit("setChildIsInitialState",t)},parameters:function(){this.$emit("updateParameters",{go:this.goTermString,chromosomePosition:this.chrValue.join(),typeOfGene:this.TOGValue.join(),filter:this.filterValue})},chrValue:function(){var t={type:"gene",item:"chr",value:this.chrValue};this.setSearchConditions(t),this.handleChrTagsUpdate(this.chrValue)},TOGValue:function(){var t={type:"gene",item:"tog",value:this.TOGValue};this.setSearchConditions(t),this.handleTOGTagsUpdate(this.TOGValue)},filterValue:function(t){var e={type:"gene",item:JSON.parse(t.replace(/\\/g,"")).method,value:t};this.setSearchConditions(e),this.handleFilterValueUpdate(this.filterValue)}},created:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getAutoCompleteData().then((function(){})),t.$emit("updateParameters",{go:t.goTermString}),t.initiateParametersDataset();case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){this.searchConditions.gene.chr&&(this.chrValue=this.searchConditions.gene.chr),this.searchConditions.gene.tog&&(this.TOGValue=this.searchConditions.gene.tog),this.searchConditions.gene.go&&this.setTags(this.searchConditions.gene.go,"go"),this.searchConditions.gene.temporaryParameters&&(this.filterValue=this.searchConditions.gene.tpm),this.searchConditions.gene.roku&&(this.filterValue=this.searchConditions.gene.roku),this.searchConditions.gene.tau&&(this.filterValue=this.searchConditions.gene.tau)},methods:T(T({},Object(m.c)({setSearchConditions:"set_search_conditions"})),{},{resetUpdateParameters:function(){this.$emit("updateParameters",{})},handleStoreInitialParameters:function(){this.$emit("storeInitialParameters",{})},resetComponent:function(){Object.assign(this.$data,w())},initiateParametersDataset:function(){var t={go:"",chromosomePosition:"",typeOfGene:"",filter:""};this.$emit("updateParameters",T({},t)),this.$emit("storeInitialParameters",T({},t))},getAutoCompleteData:function(){var t=this;return this.$axios.$get("api/cv").then((function(data){t.autocompleteStaticData=data,t.chrOptions=data[t.activeDataset.dataset].chromosomePosition.map((function(t){return Number.isNaN(parseInt(t))?t:parseInt(t)})).sort((function(a,b){var t=Object(r.a)(a),e=Object(r.a)(b);return t<e?-1:t>e?1:a<b?-1:a>b?1:0})),t.TOGOptions=data[t.activeDataset.dataset].typeOfGene})).catch((function(e){t.setAlertModal({msg:"Failed to get data in Screener View Sample"})}))},updateAutoComplete:function(){var t=this;clearTimeout(this.debounce);var e='{ goSuggest (text: "'.concat(this.temporaryParameters.goTerm,'", dataset: "').concat(this.activeDataset.dataset,'") { goId, goTerm }}');this.debounce=setTimeout((function(){t.$axios.$post("gql",{query:e}).then((function(e){var n,r;t.$set(t.autoComplete,"go",null===(n=e.data)||void 0===n||null===(r=n.goSuggest)||void 0===r?void 0:r.map((function(a){return{text:a.goTerm,id:a.goId}})))})).catch((function(){return console.warn("Oh. Something went wrong")}))}),300)},handleSingleTagUpdate:function(t,text){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["ti-valid"],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"go";this.parameters[n].find((function(e){return e.id===t}))||(this.$set(this.temporaryParameters,"goTerm",""),this.setTags([{id:t,text:text,tiClasses:e}],n))},handleChrTagsUpdate:function(t){this.parameters=T(T({},this.parameters),{},Object(c.a)({},"chromosomePosition",t.join()))},handleTOGTagsUpdate:function(t){this.parameters=T(T({},this.parameters),{},Object(c.a)({},"typeOfGene",t.join()))},handleFilterValueUpdate:function(t){this.parameters=T(T({},this.parameters),{},Object(c.a)({},"filter",this.filterValue))},setTags:function(t,e){this.parameters=T(T({},this.parameters),{},Object(c.a)({},e,t)),this.hideCaret=0!==t.length;var n={type:"gene",item:"go",value:t};this.setSearchConditions(n)},addFilterValue:function(t,e){switch(t){case"TPM":if(e[0].sample.id&&e[0].cutoff&&e[0].condition&&e[0].statistic){var filter={method:"tpm",sample:e[0].sample.id,value:e[0].cutoff,logic:e[0].condition,statistic:e[0].statistic},n=JSON.stringify(filter).replace(/"/g,'\\"');this.TPMValue=e,this.filterValue=n,filter.method=filter.method.toUpperCase(),this.activeFilterObj=filter}break;case"ROKU":if(e[0].group&&e[0].sample.id&&e[0].horl){var r={method:"roku",group:e[0].group,sample:e[0].sample.id,highlow:e[0].horl,entropy_min:e[0].emin,entropy_max:e[0].emax},o=JSON.stringify(r).replace(/"/g,'\\"');this.ROKUValue=e,this.filterValue=o,r.method=r.method.toUpperCase(),this.activeFilterObj=r}break;case"tau":if(e[0].group&&e[0].condition&&e[0].cutoff){var c={method:"tau",group:e[0].group,logic:e[0].condition,value:e[0].cutoff},l=JSON.stringify(c).replace(/"/g,'\\"');this.tauValue=e,this.filterValue=l,this.activeFilterObj=c}}}})},S=C,V=(n(512),n(41)),component=Object(V.a)(S,(function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("Genes with Chr")]),t._v(" "),e("client-only",[e("multi-select",{attrs:{"allow-empty":!0,"close-on-select":!1,placeholder:"",options:t.chrOptions,multiple:!0},scopedSlots:t._u([{key:"option",fn:function(n){return[e("div",{staticClass:"option"},[e("input",{attrs:{type:"checkbox"},domProps:{checked:t.chrValue.includes(n.option),value:n.option.name}}),t._v(" "),e("span",{staticClass:"option__small"},[t._v(t._s(n.option))])])]}}]),model:{value:t.chrValue,callback:function(e){t.chrValue=e},expression:"chrValue"}})],1),t._v(" "),e("h3",[t._v("Genes with Type of Gene")]),t._v(" "),e("client-only",[e("multi-select",{attrs:{"allow-empty":!0,"close-on-select":!1,placeholder:"",options:t.TOGOptions,multiple:!0},scopedSlots:t._u([{key:"option",fn:function(n){return[e("div",{staticClass:"option"},[e("input",{attrs:{type:"checkbox"},domProps:{checked:t.TOGValue.includes(n.option),value:n.option.name}}),t._v(" "),e("span",{staticClass:"option__small"},[t._v(t._s(n.option))])])]}}]),model:{value:t.TOGValue,callback:function(e){t.TOGValue=e},expression:"TOGValue"}})],1),t._v(" "),e("h3",[t._v("\n    Genes with GO Term\n    "),e("span",{staticClass:"example"},[t._v("e.g.\n      "),e("span",{staticClass:"sample_value",on:{click:function(e){return t.handleSingleTagUpdate("GO:0008134","transcription factor binding")}}},[t._v("transcription factor binding")]),t._v(",\n      "),e("span",{staticClass:"sample_value",on:{click:function(e){return t.handleSingleTagUpdate("GO:0030154","cell differentiation")}}},[t._v("cell differentiation\n      ")])])]),t._v(" "),e("client-only",[e("vue-tags-input",{class:{hide_caret:t.hideCaret},attrs:{tags:t.parameters.go,"autocomplete-items":t.autoComplete.go,"max-tags":1,"add-only-from-autocomplete":"",placeholder:t.placeholderGOTerm},on:{input:t.updateAutoComplete,"tags-changed":function(e){return t.setTags(e,"go")}},scopedSlots:t._u([{key:"autocomplete-item",fn:function(n){var r=n.item;return e("div",{staticClass:"my-item",domProps:{innerHTML:t._s(t.$highlightedSuggestion(r.text,t.temporaryParameters.goTerm))},on:{click:function(e){return t.handleSingleTagUpdate(r.id,r.text)}}})}}]),model:{value:t.temporaryParameters.goTerm,callback:function(e){t.$set(t.temporaryParameters,"goTerm",e)},expression:"temporaryParameters.goTerm"}})],1),t._v(" "),e("div",{staticClass:"filter_search_condition"},[t.activeFilterObj.method?[e("b",[t._v("Filter by "+t._s(t.activeFilterObj.method))]),t._v(" will be applied to the\n      search conditions.\n    ")]:[e("b",[t._v("None")]),t._v(" of the following filters will be applied to the search\n      conditions.\n    ")]],2),t._v(" "),t._l(t.geneFilters,(function(filter,n){return e("ScreenerViewGeneFilter",{key:n,attrs:{filter:t.geneFilters[n],"active-filter-obj":t.activeFilterObj,columns:filter.columns,datasets:t.datasets},on:{"update:filter":function(e){return t.$set(t.geneFilters,n,e)},"update:activeFilterObj":function(e){t.activeFilterObj=e},"update:active-filter-obj":function(e){t.activeFilterObj=e},addFilterValue:t.addFilterValue,resetUpdateParameters:t.resetUpdateParameters,resetActiveFilterObj:function(e){t.activeFilterObj={}}}})}))],2)}),[],!1,null,"2dcf79d5",null);e.default=component.exports;installComponents(component,{ScreenerViewGeneFilter:n(489).default})}}]);